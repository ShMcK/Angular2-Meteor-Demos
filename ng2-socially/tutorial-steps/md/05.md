 In this step, you will learn how to create a layout template and how to build an app that has multiple views by adding routing, using the new Angular router.

The goals for this step:

* When you navigate to `index.html`, you will be redirected to the `Socially` component and the party list should appear in the browser.
* When you click on a party link the URL should change to one specific to that party and the stub of a party detail page is displayed.

# Dependencies

The routing functionality added by this step is provided by the new [angular-router](https://angular.io/docs/js/latest/api/router/) module, which is distributed separately from the core Angular framework.

We will install angular-router with the help of [a package I've put together](https://atmospherejs.com/shmck/angular2-router).

Type in the command line:

    $ meteor add shmck:angular2-router

Let's import and add the package dependencies.

__`app.ts`:__

    import {Component, View, bootstrap} from 'angular2/angular2';
    import {routerInjectables, routerDirectives, Router, RouteConfig} from 'angular2/router';
    // Alternatively, HashLocationStrategy

    @Component({
      selector: 'app'
    })
    @View({
      template: 'index.ng.html',
      directives: [routerDirectives]
    })
    @RouteConfig(
      // route configurations here
    )
    class Socially {}

    bootstrap(Socially, [
      routerInjectables
    ]);

Let's make a checklist of what we need here:

* imports from `'angular2/router``
* `@RouteConfig()` which will specify our routes
* View directives adding `routerDirectives`, allowing us to communicate with the view
* `routerInjectables` injected into the component, allowing the rest of the app to use the router


# Multiple Views, Routing and Layout Template

Our app is slowly growing and becoming more complex.
Until now, the app provided our users with a single view (the list of all parties), and all of the template code was located in the `index.ng.html` file.

The next step in building the app is to add a view that will show detailed information about each of the parties in our list.

To add the detailed view, we could expand the `index.ng.html` file to contain template code for both views, but that would get messy very quickly.

Instead, we are going to turn the Socially component into what we call a "layout template". This is a template that is common for all views in our application.
Other "partial templates" are then included into this layout template depending on the current "route" â€” the view that is currently displayed to the user.

Application routes in Angular 2 are declared via the [RouteConfig](https://angular.io/docs/js/latest/api/router/RouteConfig-var.html) annotation.
This service makes it easy to wire together components and the current URL location in the browser.
Using this feature we can implement deep linking, which lets us utilize the browser's history (back and forward navigation) and bookmarks.

## Root App

In the new Angular router, we don't route to templates or controllers. Instead, we route directly components. Because of this, we're going to have to re-factor our app a bit.

Let's move the content of Socially out into a `party-list` component. Create a new file called 'parties-list.ts' and put it in its own component folder. We'll also import some router directives to use later.

__`parties-list/parties-list.ts`:__

    import {Component, View, NgFor} from 'angular2/angular2';
    import {routerDirectives} from 'angular2/router';
    import {PartiesForm} from 'client/parties-form/parties-form';

    @Component({
      selector: 'parties-list'
    })
    @View({
      templateUrl: 'parties-list/parties-list.ng.html',
      directives: [NgFor, routerDirectives, PartiesForm]
    })
    export class PartiesList {
      constructor() {
        Tracker.autorun(zone.bind(() => {
          this.parties = Parties.find().fetch();
        }));
      }
    }

Move the `index.ng.html` file into the parties-list folder and rename it `parties-list.ng.html'.

Good. Now our app structure looks like this:
  
    Socially
        \- PartiesList
            \- PartiesForm

